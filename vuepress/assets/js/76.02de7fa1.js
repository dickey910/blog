(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{545:function(t,e,n){"use strict";n.r(e);var s=n(12),a=Object(s.a)({},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"可编辑的页面——designmode、contenteditable和user-modify"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可编辑的页面——designmode、contenteditable和user-modify","aria-hidden":"true"}},[t._v("#")]),t._v(" 可编辑的页面——designMode、contenteditable和user-modify")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://xiaotianxia.github.io/blog/vuepress/js/editable_dom.html?_=5432542436436543",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[t._v("前几天想研究一下富文本编辑器，发现这玩意涉及的知识点和“坑”还真不少。\n谁知道在查阅资料时还有一些额外的收获😄 。")]),t._v(" "),n("p",[t._v("于是，今天不谈富文本编辑器，而是一起学一下跟它相关的几个神奇的属性。\n或许好多同学跟我一样，还从没见过，它们分别是："),n("strong",[t._v("isContentEditable")]),t._v("、"),n("strong",[t._v("designMode")]),t._v("、"),n("strong",[t._v("user-modify")]),t._v("\n和几乎人人都知道的"),n("strong",[t._v("contenteditable")]),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"iscontenteditable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iscontenteditable","aria-hidden":"true"}},[t._v("#")]),t._v(" isContentEditable")]),t._v(" "),n("p",[t._v("很简单，一个只读的属性，返回true或false，表示页面元素是否可编辑。")]),t._v(" "),n("h2",{attrs:{id:"designmode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#designmode","aria-hidden":"true"}},[t._v("#")]),t._v(" designMode")]),t._v(" "),n("p",[t._v("是document的一个全局开关，可读可写，有两个值：“on”、“off”，表示"),n("strong",[t._v("整个页面")]),t._v("是否可编辑。一般情况下，document.designMode返回是off。\n可以手动设置’开‘或者’关‘，不妨自己试一下，在console里输入:")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("designMode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("再用鼠标点一点页面，是不是发现了神奇的现象？！")]),t._v(" "),n("p",[t._v("参考下图：\n"),n("img",{attrs:{src:"http://pq3mt9wke.bkt.clouddn.com/blogeditable.gif",alt:"示意图"}}),t._v("\n整个页面都变成了可编辑状态。\n这时候，所有元素的isContentEditable属性都变成了true：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h2",{attrs:{id:"user-modify"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#user-modify","aria-hidden":"true"}},[t._v("#")]),t._v(" user-modify")]),t._v(" "),n("p",[t._v("这家伙是一个CSS属性！但其功能不可小觑，是CSS版的contenteditable。")]),t._v(" "),n("div",{staticClass:"language-css line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-only"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   //只读\n"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-write"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //读写，支持富文本\n"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" write-only"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //只写？！ 什么鬼，不知道啥意思\n"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-write-plaintext-only"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //读写，但只可输入文本\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("直接看张鑫旭大大的"),n("a",{attrs:{href:"http://www.zhangxinxu.com/study/201601/user-modify.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1),t._v("吧。")]),t._v(" "),n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),n("p",[t._v("但这时候，isContentEditable是检测不到的该元素是否可编辑的")])]),t._v(" "),n("h2",{attrs:{id:"contenteditable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#contenteditable","aria-hidden":"true"}},[t._v("#")]),t._v(" contenteditable")]),t._v(" "),n("p",[t._v("前两个属性都存在很大的缺点，designMode是针对整个document的，对于想做到模块化的编辑器的实现是很难得，\nuser-modify的兼容性更是经不起太多的考验。")]),t._v(" "),n("p",[t._v("那么就只剩下contenteditable了，这是大多数浏览器都能兼容的。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("contenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//与contenteditable="true"效果一样')]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events"')]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"caret"')]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typing"')]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plaintext-only"')]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可编辑，只允许纯文本")]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可编辑，支持富文本")]),t._v("\ncontenteditable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不可编辑")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v('"events"、"caret"、"typing"看了半天'),n("a",{attrs:{href:"https://w3c.github.io/editing/contentEditable.html#contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),n("OutboundLink")],1),t._v("也没搞清楚啥意思，而且貌似现在的浏览器也不支持。\n可以自己试下：点"),n("a",{attrs:{href:"http://www.w3school.com.cn/tiy/t.asp?f=html5_global_contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),n("OutboundLink")],1),t._v("。有知道的大神还望指导一下下🙏 ~")]),t._v(" "),n("h2",{attrs:{id:"demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#demo","aria-hidden":"true"}},[t._v("#")]),t._v(" demo:")]),t._v(" "),n("Editor-ContenteditableTest"),t._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("p",[t._v("只是蜻蜓点水般的介绍，具体细节没有深究。后续的文章会就与contenteditable有关的几个对象展开学习。")]),t._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/isContentEditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLElement.isContentEditable"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/designMode",target:"_blank",rel:"noopener noreferrer"}},[t._v("Document.designMode"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://w3c.github.io/editing/contentEditable.html#contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("ContentEditable"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://www.zhangxinxu.com/wordpress/2016/01/contenteditable-plaintext-only/",target:"_blank",rel:"noopener noreferrer"}},[t._v("小tip: 如何让contenteditable元素只能输入纯文本"),n("OutboundLink")],1)])])],1)},[],!1,null,null,null);e.default=a.exports}}]);